{"version":3,"file":"index.js","sources":["../node_modules/a11y-dialog/dist/a11y-dialog.esm.js","../src/attributes.ts","../src/card.ts","../src/stack.ts","../src/checker.ts","../node_modules/array-shuffle/index.js","../src/svg.ts","../src/index.ts"],"sourcesContent":["var focusableSelectors = [\n  'a[href]:not([tabindex^=\"-\"])',\n  'area[href]:not([tabindex^=\"-\"])',\n  'input:not([type=\"hidden\"]):not([type=\"radio\"]):not([disabled]):not([tabindex^=\"-\"])',\n  'input[type=\"radio\"]:not([disabled]):not([tabindex^=\"-\"])',\n  'select:not([disabled]):not([tabindex^=\"-\"])',\n  'textarea:not([disabled]):not([tabindex^=\"-\"])',\n  'button:not([disabled]):not([tabindex^=\"-\"])',\n  'iframe:not([tabindex^=\"-\"])',\n  'audio[controls]:not([tabindex^=\"-\"])',\n  'video[controls]:not([tabindex^=\"-\"])',\n  '[contenteditable]:not([tabindex^=\"-\"])',\n  '[tabindex]:not([tabindex^=\"-\"])',\n];\n\nvar TAB_KEY = 9;\nvar ESCAPE_KEY = 27;\n\n/**\n * Define the constructor to instantiate a dialog\n *\n * @constructor\n * @param {Element} element\n */\nfunction A11yDialog(element) {\n  // Prebind the functions that will be bound in addEventListener and\n  // removeEventListener to avoid losing references\n  this._show = this.show.bind(this);\n  this._hide = this.hide.bind(this);\n  this._maintainFocus = this._maintainFocus.bind(this);\n  this._bindKeypress = this._bindKeypress.bind(this);\n\n  this.$el = element;\n  this.shown = false;\n  this._id = this.$el.getAttribute('data-a11y-dialog') || this.$el.id;\n  this._previouslyFocused = null;\n  this._listeners = {};\n\n  // Initialise everything needed for the dialog to work properly\n  this.create();\n}\n\n/**\n * Set up everything necessary for the dialog to be functioning\n *\n * @param {(NodeList | Element | string)} targets\n * @return {this}\n */\nA11yDialog.prototype.create = function () {\n  this.$el.setAttribute('aria-hidden', true);\n  this.$el.setAttribute('aria-modal', true);\n  this.$el.setAttribute('tabindex', -1);\n\n  if (!this.$el.hasAttribute('role')) {\n    this.$el.setAttribute('role', 'dialog');\n  }\n\n  // Keep a collection of dialog openers, each of which will be bound a click\n  // event listener to open the dialog\n  this._openers = $$('[data-a11y-dialog-show=\"' + this._id + '\"]');\n  this._openers.forEach(\n    function (opener) {\n      opener.addEventListener('click', this._show);\n    }.bind(this)\n  );\n\n  // Keep a collection of dialog closers, each of which will be bound a click\n  // event listener to close the dialog\n  this._closers = $$('[data-a11y-dialog-hide]', this.$el).concat(\n    $$('[data-a11y-dialog-hide=\"' + this._id + '\"]')\n  );\n  this._closers.forEach(\n    function (closer) {\n      closer.addEventListener('click', this._hide);\n    }.bind(this)\n  );\n\n  // Execute all callbacks registered for the `create` event\n  this._fire('create');\n\n  return this\n};\n\n/**\n * Show the dialog element, disable all the targets (siblings), trap the\n * current focus within it, listen for some specific key presses and fire all\n * registered callbacks for `show` event\n *\n * @param {CustomEvent} event\n * @return {this}\n */\nA11yDialog.prototype.show = function (event) {\n  // If the dialog is already open, abort\n  if (this.shown) {\n    return this\n  }\n\n  // Keep a reference to the currently focused element to be able to restore\n  // it later\n  this._previouslyFocused = document.activeElement;\n  this.$el.removeAttribute('aria-hidden');\n  this.shown = true;\n\n  // Set the focus to the dialog element\n  moveFocusToDialog(this.$el);\n\n  // Bind a focus event listener to the body element to make sure the focus\n  // stays trapped inside the dialog while open, and start listening for some\n  // specific key presses (TAB and ESC)\n  document.body.addEventListener('focus', this._maintainFocus, true);\n  document.addEventListener('keydown', this._bindKeypress);\n\n  // Execute all callbacks registered for the `show` event\n  this._fire('show', event);\n\n  return this\n};\n\n/**\n * Hide the dialog element, enable all the targets (siblings), restore the\n * focus to the previously active element, stop listening for some specific\n * key presses and fire all registered callbacks for `hide` event\n *\n * @param {CustomEvent} event\n * @return {this}\n */\nA11yDialog.prototype.hide = function (event) {\n  // If the dialog is already closed, abort\n  if (!this.shown) {\n    return this\n  }\n\n  this.shown = false;\n  this.$el.setAttribute('aria-hidden', 'true');\n\n  // If there was a focused element before the dialog was opened (and it has a\n  // `focus` method), restore the focus back to it\n  // See: https://github.com/KittyGiraudel/a11y-dialog/issues/108\n  if (this._previouslyFocused && this._previouslyFocused.focus) {\n    this._previouslyFocused.focus();\n  }\n\n  // Remove the focus event listener to the body element and stop listening\n  // for specific key presses\n  document.body.removeEventListener('focus', this._maintainFocus, true);\n  document.removeEventListener('keydown', this._bindKeypress);\n\n  // Execute all callbacks registered for the `hide` event\n  this._fire('hide', event);\n\n  return this\n};\n\n/**\n * Destroy the current instance (after making sure the dialog has been hidden)\n * and remove all associated listeners from dialog openers and closers\n *\n * @return {this}\n */\nA11yDialog.prototype.destroy = function () {\n  // Hide the dialog to avoid destroying an open instance\n  this.hide();\n\n  // Remove the click event listener from all dialog openers\n  this._openers.forEach(\n    function (opener) {\n      opener.removeEventListener('click', this._show);\n    }.bind(this)\n  );\n\n  // Remove the click event listener from all dialog closers\n  this._closers.forEach(\n    function (closer) {\n      closer.removeEventListener('click', this._hide);\n    }.bind(this)\n  );\n\n  // Execute all callbacks registered for the `destroy` event\n  this._fire('destroy');\n\n  // Keep an object of listener types mapped to callback functions\n  this._listeners = {};\n\n  return this\n};\n\n/**\n * Register a new callback for the given event type\n *\n * @param {string} type\n * @param {Function} handler\n */\nA11yDialog.prototype.on = function (type, handler) {\n  if (typeof this._listeners[type] === 'undefined') {\n    this._listeners[type] = [];\n  }\n\n  this._listeners[type].push(handler);\n\n  return this\n};\n\n/**\n * Unregister an existing callback for the given event type\n *\n * @param {string} type\n * @param {Function} handler\n */\nA11yDialog.prototype.off = function (type, handler) {\n  var index = (this._listeners[type] || []).indexOf(handler);\n\n  if (index > -1) {\n    this._listeners[type].splice(index, 1);\n  }\n\n  return this\n};\n\n/**\n * Iterate over all registered handlers for given type and call them all with\n * the dialog element as first argument, event as second argument (if any). Also\n * dispatch a custom event on the DOM element itself to make it possible to\n * react to the lifecycle of auto-instantiated dialogs.\n *\n * @access private\n * @param {string} type\n * @param {CustomEvent} event\n */\nA11yDialog.prototype._fire = function (type, event) {\n  var listeners = this._listeners[type] || [];\n  var domEvent = new CustomEvent(type, { detail: event });\n\n  this.$el.dispatchEvent(domEvent);\n\n  listeners.forEach(\n    function (listener) {\n      listener(this.$el, event);\n    }.bind(this)\n  );\n};\n\n/**\n * Private event handler used when listening to some specific key presses\n * (namely ESCAPE and TAB)\n *\n * @access private\n * @param {Event} event\n */\nA11yDialog.prototype._bindKeypress = function (event) {\n  // This is an escape hatch in case there are nested dialogs, so the keypresses\n  // are only reacted to for the most recent one\n  if (!this.$el.contains(document.activeElement)) return\n\n  // If the dialog is shown and the ESCAPE key is being pressed, prevent any\n  // further effects from the ESCAPE key and hide the dialog, unless its role\n  // is 'alertdialog', which should be modal\n  if (\n    this.shown &&\n    event.which === ESCAPE_KEY &&\n    this.$el.getAttribute('role') !== 'alertdialog'\n  ) {\n    event.preventDefault();\n    this.hide(event);\n  }\n\n  // If the dialog is shown and the TAB key is being pressed, make sure the\n  // focus stays trapped within the dialog element\n  if (this.shown && event.which === TAB_KEY) {\n    trapTabKey(this.$el, event);\n  }\n};\n\n/**\n * Private event handler used when making sure the focus stays within the\n * currently open dialog\n *\n * @access private\n * @param {Event} event\n */\nA11yDialog.prototype._maintainFocus = function (event) {\n  // If the dialog is shown and the focus is not within a dialog element (either\n  // this one or another one in case of nested dialogs) or within an element\n  // with the `data-a11y-dialog-focus-trap-ignore` attribute, move it back to\n  // its first focusable child.\n  // See: https://github.com/KittyGiraudel/a11y-dialog/issues/177\n  if (\n    this.shown &&\n    !event.target.closest('[aria-modal=\"true\"]') &&\n    !event.target.closest('[data-a11y-dialog-ignore-focus-trap]')\n  ) {\n    moveFocusToDialog(this.$el);\n  }\n};\n\n/**\n * Convert a NodeList into an array\n *\n * @param {NodeList} collection\n * @return {Array<Element>}\n */\nfunction toArray(collection) {\n  return Array.prototype.slice.call(collection)\n}\n\n/**\n * Query the DOM for nodes matching the given selector, scoped to context (or\n * the whole document)\n *\n * @param {String} selector\n * @param {Element} [context = document]\n * @return {Array<Element>}\n */\nfunction $$(selector, context) {\n  return toArray((context || document).querySelectorAll(selector))\n}\n\n/**\n * Set the focus to the first element with `autofocus` with the element or the\n * element itself\n *\n * @param {Element} node\n */\nfunction moveFocusToDialog(node) {\n  var focused = node.querySelector('[autofocus]') || node;\n\n  focused.focus();\n}\n\n/**\n * Get the focusable children of the given element\n *\n * @param {Element} node\n * @return {Array<Element>}\n */\nfunction getFocusableChildren(node) {\n  return $$(focusableSelectors.join(','), node).filter(function (child) {\n    return !!(\n      child.offsetWidth ||\n      child.offsetHeight ||\n      child.getClientRects().length\n    )\n  })\n}\n\n/**\n * Trap the focus inside the given element\n *\n * @param {Element} node\n * @param {Event} event\n */\nfunction trapTabKey(node, event) {\n  var focusableChildren = getFocusableChildren(node);\n  var focusedItemIndex = focusableChildren.indexOf(document.activeElement);\n\n  // If the SHIFT key is being pressed while tabbing (moving backwards) and\n  // the currently focused item is the first one, move the focus to the last\n  // focusable item from the dialog element\n  if (event.shiftKey && focusedItemIndex === 0) {\n    focusableChildren[focusableChildren.length - 1].focus();\n    event.preventDefault();\n    // If the SHIFT key is not being pressed (moving forwards) and the currently\n    // focused item is the last one, move the focus to the first focusable item\n    // from the dialog element\n  } else if (\n    !event.shiftKey &&\n    focusedItemIndex === focusableChildren.length - 1\n  ) {\n    focusableChildren[0].focus();\n    event.preventDefault();\n  }\n}\n\nfunction instantiateDialogs() {\n  $$('[data-a11y-dialog]').forEach(function (node) {\n    new A11yDialog(node);\n  });\n}\n\nif (typeof document !== 'undefined') {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', instantiateDialogs);\n  } else {\n    if (window.requestAnimationFrame) {\n      window.requestAnimationFrame(instantiateDialogs);\n    } else {\n      window.setTimeout(instantiateDialogs, 16);\n    }\n  }\n}\n\nexport { A11yDialog as default };\n",null,null,null,null,"export default function arrayShuffle(array) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new TypeError(`Expected an array, got ${typeof array}`);\n\t}\n\n\tarray = [...array];\n\n\tfor (let index = array.length - 1; index > 0; index--) {\n\t\tconst newIndex = Math.floor(Math.random() * (index + 1));\n\t\t[array[index], array[newIndex]] = [array[newIndex], array[index]];\n\t}\n\n\treturn array;\n}\n",null,null],"names":["Color","Shape","Count","Fill","focusableSelectors","A11yDialog","element","this","_show","show","bind","_hide","hide","_maintainFocus","_bindKeypress","$el","shown","_id","getAttribute","id","_previouslyFocused","_listeners","create","$$","selector","context","collection","document","querySelectorAll","Array","prototype","slice","call","moveFocusToDialog","node","querySelector","focus","instantiateDialogs","forEach","setAttribute","hasAttribute","_openers","opener","addEventListener","_closers","concat","closer","_fire","event","activeElement","removeAttribute","body","removeEventListener","destroy","on","type","handler","push","off","index","indexOf","splice","listeners","domEvent","CustomEvent","detail","dispatchEvent","listener","contains","which","preventDefault","focusableChildren","join","filter","child","offsetWidth","offsetHeight","getClientRects","length","getFocusableChildren","focusedItemIndex","shiftKey","trapTabKey","target","closest","readyState","window","requestAnimationFrame","setTimeout","Card","constructor","attributes","shape","fill","count","color","static","attrs","randomEnum","enumeration","values","Object","keys","Math","floor","random","Stack","stack_size","cards","card","cards_left","take_one","RangeError","take","n","_","Checker","colors","Set","shapes","counts","fills","add","some","set","size","first","second","third","is_set","_cards","numberOfCardsToHint","array","isArray","TypeError","newIndex","arrayShuffle","shapeSVG","Squiggle","Diamond","Pill","keyboardInput","currentEl","numRows","getNumberOfRows","numCards","numberOfCards","currentCardIndex","keyCode","lastCardIndex","gc","getComputedStyle","getPropertyValue","split","fillSpots","stack","board","currentEmptyCells","allEmptyCells","cell","addCardToCell","setCardsLeft","focusOnFirstCard","cardElement","position","spot","cardButton","createElement","classList","i","count_to_num","innerHTML","Shaded","setAttributeNS","throwShade","drawCard","appendChild","remove","selectedCards","c","allCards","handleAddThreeCards","container","d","String","toggleMoreCardsButton","addCellClickHandlers","handleAddThreeCardsFromDialog","toggleAttribute","handleCellClick","handleRequestForHint","dataset","hints","hint","parseInt","checkDialog","el","parentElement","click","ensureOnly12Cards","number","_a","handleColorChange","colorSelector","_applyColorSelection","hex","value","getElementById","append","handleGetPermalink","handleResetColor","colorInput","previousElementSibling","color1","color2","color3","url","location","origin","pathname","input","setColorOne","isHexColor","initialColor","setColorTwo","setColorThree","test","tagName","style","transform","removeChild","console","log","sets_found","extras","map","empty_extras","last","pop","cellIndex","undefined","pushCardsBack","handleDialogClose","search","param_string","pmap","param","k","v","c1","c2","c3","handleColorUrlParams","handleCheckDialogClose","text","any_sets","navigator","clipboard","writeText","nextElementSibling"],"mappings":"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"}