{"version":3,"file":"index.js","sources":["../node_modules/a11y-dialog/dist/a11y-dialog.esm.js","../src/attributes.ts","../src/card.ts","../src/stack.ts","../src/checker.ts","../src/svg.ts","../src/index.ts"],"sourcesContent":["var focusableSelectors = [\n  'a[href]:not([tabindex^=\"-\"])',\n  'area[href]:not([tabindex^=\"-\"])',\n  'input:not([type=\"hidden\"]):not([type=\"radio\"]):not([disabled]):not([tabindex^=\"-\"])',\n  'input[type=\"radio\"]:not([disabled]):not([tabindex^=\"-\"])',\n  'select:not([disabled]):not([tabindex^=\"-\"])',\n  'textarea:not([disabled]):not([tabindex^=\"-\"])',\n  'button:not([disabled]):not([tabindex^=\"-\"])',\n  'iframe:not([tabindex^=\"-\"])',\n  'audio[controls]:not([tabindex^=\"-\"])',\n  'video[controls]:not([tabindex^=\"-\"])',\n  '[contenteditable]:not([tabindex^=\"-\"])',\n  '[tabindex]:not([tabindex^=\"-\"])',\n];\n\nvar TAB_KEY = 9;\nvar ESCAPE_KEY = 27;\n\n/**\n * Define the constructor to instantiate a dialog\n *\n * @constructor\n * @param {Element} element\n */\nfunction A11yDialog(element) {\n  // Prebind the functions that will be bound in addEventListener and\n  // removeEventListener to avoid losing references\n  this._show = this.show.bind(this);\n  this._hide = this.hide.bind(this);\n  this._maintainFocus = this._maintainFocus.bind(this);\n  this._bindKeypress = this._bindKeypress.bind(this);\n\n  this.$el = element;\n  this.shown = false;\n  this._id = this.$el.getAttribute('data-a11y-dialog') || this.$el.id;\n  this._previouslyFocused = null;\n  this._listeners = {};\n\n  // Initialise everything needed for the dialog to work properly\n  this.create();\n}\n\n/**\n * Set up everything necessary for the dialog to be functioning\n *\n * @param {(NodeList | Element | string)} targets\n * @return {this}\n */\nA11yDialog.prototype.create = function () {\n  this.$el.setAttribute('aria-hidden', true);\n  this.$el.setAttribute('aria-modal', true);\n  this.$el.setAttribute('tabindex', -1);\n\n  if (!this.$el.hasAttribute('role')) {\n    this.$el.setAttribute('role', 'dialog');\n  }\n\n  // Keep a collection of dialog openers, each of which will be bound a click\n  // event listener to open the dialog\n  this._openers = $$('[data-a11y-dialog-show=\"' + this._id + '\"]');\n  this._openers.forEach(\n    function (opener) {\n      opener.addEventListener('click', this._show);\n    }.bind(this)\n  );\n\n  // Keep a collection of dialog closers, each of which will be bound a click\n  // event listener to close the dialog\n  this._closers = $$('[data-a11y-dialog-hide]', this.$el).concat(\n    $$('[data-a11y-dialog-hide=\"' + this._id + '\"]')\n  );\n  this._closers.forEach(\n    function (closer) {\n      closer.addEventListener('click', this._hide);\n    }.bind(this)\n  );\n\n  // Execute all callbacks registered for the `create` event\n  this._fire('create');\n\n  return this\n};\n\n/**\n * Show the dialog element, disable all the targets (siblings), trap the\n * current focus within it, listen for some specific key presses and fire all\n * registered callbacks for `show` event\n *\n * @param {CustomEvent} event\n * @return {this}\n */\nA11yDialog.prototype.show = function (event) {\n  // If the dialog is already open, abort\n  if (this.shown) {\n    return this\n  }\n\n  // Keep a reference to the currently focused element to be able to restore\n  // it later\n  this._previouslyFocused = document.activeElement;\n  this.$el.removeAttribute('aria-hidden');\n  this.shown = true;\n\n  // Set the focus to the dialog element\n  moveFocusToDialog(this.$el);\n\n  // Bind a focus event listener to the body element to make sure the focus\n  // stays trapped inside the dialog while open, and start listening for some\n  // specific key presses (TAB and ESC)\n  document.body.addEventListener('focus', this._maintainFocus, true);\n  document.addEventListener('keydown', this._bindKeypress);\n\n  // Execute all callbacks registered for the `show` event\n  this._fire('show', event);\n\n  return this\n};\n\n/**\n * Hide the dialog element, enable all the targets (siblings), restore the\n * focus to the previously active element, stop listening for some specific\n * key presses and fire all registered callbacks for `hide` event\n *\n * @param {CustomEvent} event\n * @return {this}\n */\nA11yDialog.prototype.hide = function (event) {\n  // If the dialog is already closed, abort\n  if (!this.shown) {\n    return this\n  }\n\n  this.shown = false;\n  this.$el.setAttribute('aria-hidden', 'true');\n\n  // If there was a focused element before the dialog was opened (and it has a\n  // `focus` method), restore the focus back to it\n  // See: https://github.com/KittyGiraudel/a11y-dialog/issues/108\n  if (this._previouslyFocused && this._previouslyFocused.focus) {\n    this._previouslyFocused.focus();\n  }\n\n  // Remove the focus event listener to the body element and stop listening\n  // for specific key presses\n  document.body.removeEventListener('focus', this._maintainFocus, true);\n  document.removeEventListener('keydown', this._bindKeypress);\n\n  // Execute all callbacks registered for the `hide` event\n  this._fire('hide', event);\n\n  return this\n};\n\n/**\n * Destroy the current instance (after making sure the dialog has been hidden)\n * and remove all associated listeners from dialog openers and closers\n *\n * @return {this}\n */\nA11yDialog.prototype.destroy = function () {\n  // Hide the dialog to avoid destroying an open instance\n  this.hide();\n\n  // Remove the click event listener from all dialog openers\n  this._openers.forEach(\n    function (opener) {\n      opener.removeEventListener('click', this._show);\n    }.bind(this)\n  );\n\n  // Remove the click event listener from all dialog closers\n  this._closers.forEach(\n    function (closer) {\n      closer.removeEventListener('click', this._hide);\n    }.bind(this)\n  );\n\n  // Execute all callbacks registered for the `destroy` event\n  this._fire('destroy');\n\n  // Keep an object of listener types mapped to callback functions\n  this._listeners = {};\n\n  return this\n};\n\n/**\n * Register a new callback for the given event type\n *\n * @param {string} type\n * @param {Function} handler\n */\nA11yDialog.prototype.on = function (type, handler) {\n  if (typeof this._listeners[type] === 'undefined') {\n    this._listeners[type] = [];\n  }\n\n  this._listeners[type].push(handler);\n\n  return this\n};\n\n/**\n * Unregister an existing callback for the given event type\n *\n * @param {string} type\n * @param {Function} handler\n */\nA11yDialog.prototype.off = function (type, handler) {\n  var index = (this._listeners[type] || []).indexOf(handler);\n\n  if (index > -1) {\n    this._listeners[type].splice(index, 1);\n  }\n\n  return this\n};\n\n/**\n * Iterate over all registered handlers for given type and call them all with\n * the dialog element as first argument, event as second argument (if any). Also\n * dispatch a custom event on the DOM element itself to make it possible to\n * react to the lifecycle of auto-instantiated dialogs.\n *\n * @access private\n * @param {string} type\n * @param {CustomEvent} event\n */\nA11yDialog.prototype._fire = function (type, event) {\n  var listeners = this._listeners[type] || [];\n  var domEvent = new CustomEvent(type, { detail: event });\n\n  this.$el.dispatchEvent(domEvent);\n\n  listeners.forEach(\n    function (listener) {\n      listener(this.$el, event);\n    }.bind(this)\n  );\n};\n\n/**\n * Private event handler used when listening to some specific key presses\n * (namely ESCAPE and TAB)\n *\n * @access private\n * @param {Event} event\n */\nA11yDialog.prototype._bindKeypress = function (event) {\n  // This is an escape hatch in case there are nested dialogs, so the keypresses\n  // are only reacted to for the most recent one\n  if (!this.$el.contains(document.activeElement)) return\n\n  // If the dialog is shown and the ESCAPE key is being pressed, prevent any\n  // further effects from the ESCAPE key and hide the dialog, unless its role\n  // is 'alertdialog', which should be modal\n  if (\n    this.shown &&\n    event.which === ESCAPE_KEY &&\n    this.$el.getAttribute('role') !== 'alertdialog'\n  ) {\n    event.preventDefault();\n    this.hide(event);\n  }\n\n  // If the dialog is shown and the TAB key is being pressed, make sure the\n  // focus stays trapped within the dialog element\n  if (this.shown && event.which === TAB_KEY) {\n    trapTabKey(this.$el, event);\n  }\n};\n\n/**\n * Private event handler used when making sure the focus stays within the\n * currently open dialog\n *\n * @access private\n * @param {Event} event\n */\nA11yDialog.prototype._maintainFocus = function (event) {\n  // If the dialog is shown and the focus is not within a dialog element (either\n  // this one or another one in case of nested dialogs) or within an element\n  // with the `data-a11y-dialog-focus-trap-ignore` attribute, move it back to\n  // its first focusable child.\n  // See: https://github.com/KittyGiraudel/a11y-dialog/issues/177\n  if (\n    this.shown &&\n    !event.target.closest('[aria-modal=\"true\"]') &&\n    !event.target.closest('[data-a11y-dialog-ignore-focus-trap]')\n  ) {\n    moveFocusToDialog(this.$el);\n  }\n};\n\n/**\n * Convert a NodeList into an array\n *\n * @param {NodeList} collection\n * @return {Array<Element>}\n */\nfunction toArray(collection) {\n  return Array.prototype.slice.call(collection)\n}\n\n/**\n * Query the DOM for nodes matching the given selector, scoped to context (or\n * the whole document)\n *\n * @param {String} selector\n * @param {Element} [context = document]\n * @return {Array<Element>}\n */\nfunction $$(selector, context) {\n  return toArray((context || document).querySelectorAll(selector))\n}\n\n/**\n * Set the focus to the first element with `autofocus` with the element or the\n * element itself\n *\n * @param {Element} node\n */\nfunction moveFocusToDialog(node) {\n  var focused = node.querySelector('[autofocus]') || node;\n\n  focused.focus();\n}\n\n/**\n * Get the focusable children of the given element\n *\n * @param {Element} node\n * @return {Array<Element>}\n */\nfunction getFocusableChildren(node) {\n  return $$(focusableSelectors.join(','), node).filter(function (child) {\n    return !!(\n      child.offsetWidth ||\n      child.offsetHeight ||\n      child.getClientRects().length\n    )\n  })\n}\n\n/**\n * Trap the focus inside the given element\n *\n * @param {Element} node\n * @param {Event} event\n */\nfunction trapTabKey(node, event) {\n  var focusableChildren = getFocusableChildren(node);\n  var focusedItemIndex = focusableChildren.indexOf(document.activeElement);\n\n  // If the SHIFT key is being pressed while tabbing (moving backwards) and\n  // the currently focused item is the first one, move the focus to the last\n  // focusable item from the dialog element\n  if (event.shiftKey && focusedItemIndex === 0) {\n    focusableChildren[focusableChildren.length - 1].focus();\n    event.preventDefault();\n    // If the SHIFT key is not being pressed (moving forwards) and the currently\n    // focused item is the last one, move the focus to the first focusable item\n    // from the dialog element\n  } else if (\n    !event.shiftKey &&\n    focusedItemIndex === focusableChildren.length - 1\n  ) {\n    focusableChildren[0].focus();\n    event.preventDefault();\n  }\n}\n\nfunction instantiateDialogs() {\n  $$('[data-a11y-dialog]').forEach(function (node) {\n    new A11yDialog(node);\n  });\n}\n\nif (typeof document !== 'undefined') {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', instantiateDialogs);\n  } else {\n    if (window.requestAnimationFrame) {\n      window.requestAnimationFrame(instantiateDialogs);\n    } else {\n      window.setTimeout(instantiateDialogs, 16);\n    }\n  }\n}\n\nexport { A11yDialog as default };\n",null,null,null,null,null,null],"names":["Color","Shape","Count","Fill","focusableSelectors","A11yDialog","element","this","_show","show","bind","_hide","hide","_maintainFocus","_bindKeypress","$el","shown","_id","getAttribute","id","_previouslyFocused","_listeners","create","$$","selector","context","collection","document","querySelectorAll","Array","prototype","slice","call","moveFocusToDialog","node","querySelector","focus","instantiateDialogs","forEach","setAttribute","hasAttribute","_openers","opener","addEventListener","_closers","concat","closer","_fire","event","activeElement","removeAttribute","body","removeEventListener","destroy","on","type","handler","push","off","index","indexOf","splice","listeners","domEvent","CustomEvent","detail","dispatchEvent","listener","contains","which","preventDefault","focusableChildren","join","filter","child","offsetWidth","offsetHeight","getClientRects","length","getFocusableChildren","focusedItemIndex","shiftKey","trapTabKey","target","closest","readyState","window","requestAnimationFrame","setTimeout","Card","constructor","attributes","shape","fill","count","color","static","attrs","randomEnum","enumeration","values","Object","keys","Math","floor","random","Stack","stack_size","cards","card","cards_left","take_one","RangeError","take","n","_","Checker","colors","Set","shapes","counts","fills","add","some","set","size","first","second","third","is_set","shapeSVG","Squiggle","Diamond","Pill","keyboardInput","currentEl","numRows","getNumberOfRows","numCards","numberOfCards","currentCardIndex","keyCode","newIndex","lastCardIndex","gc","getComputedStyle","getPropertyValue","split","fillSpots","stack","board","currentEmptyCells","allEmptyCells","cell","addCardToCell","setCardsLeft","focusOnFirstCard","cardElement","position","spot","cardButton","createElement","classList","i","count_to_num","innerHTML","Shaded","setAttributeNS","throwShade","drawCard","appendChild","remove","selectedCards","c","allCards","toggleMoreCardsButton","toggleAttribute","addCellClickHandlers","handleCellClick","ensureOnly12Cards","number","_a","handleColorChange","colorSelector","_applyColorSelection","dataset","hex","value","getElementById","append","handleGetPermalink","handleResetColor","colorInput","previousElementSibling","color1","color2","color3","url","location","origin","pathname","input","parentElement","setColorOne","isHexColor","el","initialColor","setColorTwo","setColorThree","test","tagName","style","transform","removeChild","sets_found","extras","map","empty_extras","last","pop","String","pushCardsBack","handleDialogClose","search","param_string","pmap","param","k","v","c1","c2","c3","handleColorUrlParams","console","log","checkDialog","text","any_sets","container","d","navigator","clipboard","writeText","nextElementSibling"],"mappings":"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"}